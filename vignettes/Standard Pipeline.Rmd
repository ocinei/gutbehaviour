---
title: "Standard Pipeline"
author: "Hephaes"
date: "2023-06-18"
output:
  pdf_document: default
  html_document: default
---

# Removing old package and installing the new one
```{r, cache = TRUE}
remove.packages("gutbehaviour")
library(tidyverse)
library(devtools)
devtools::install_github("ocinei/gutbehaviour")
```

# Data imports and preprocessing 
```{r}
data <- gutbehaviour::ABX_2 # data matrix here
average.velocity <- gutbehaviour::ABX_2_avg_velocity # average velocity here 
P.DATA <- gutbehaviour::lm_preprocess(data, average.velocity)
```

# Standard pipeline
```{r}
event_profiles <- gutbehaviour::EventProfiles_all(P.DATA, 10, 3, factor.freeze = 0.05, factor.flight = 2)
```

```{r}
eventless_profile <- gutbehaviour::.EventlessProfile(event_profiles, P.DATA)
```

```{r}
processed_event_prof <- rbind(event_profiles[[1]], eventless_profile) %>% processed_eventprofiles()
```

# Plotting 
```{r}
cumuprob_plot_new <- gutbehaviour::cumuprob_plot(event_profiles[[1]], P.DATA$time_intervals)
```

```{r}
raster <- gutbehaviour::various_lm_plots(processed_event_prof,time_intervals = P.DATA$time_intervals)
```

```{r}
cumuprob_plot_new$plot
```

```{r}
raster
```



