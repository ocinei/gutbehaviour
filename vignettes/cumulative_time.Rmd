---
title: "Cumulative Time"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Cumulative Time}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r}
library(tidyverse)
data <- read.csv("/Users/hephaescheun/Documents/gutbehaviour_data_confid/all_mice.csv") # data matrix here
average.velocity <- read.csv("/Users/hephaescheun/Documents/gutbehaviour_data_confid/all_mice_velocity.csv") # average velocity here 
P.DATA <- gutbehaviour::lm_preprocess(data, average.velocity)
```

```{r}
event_profiles <- gutbehaviour::EventProfiles_all(P.DATA, 14, 2, factor.freeze = 0.2, factor.flight = 3)
```

```{r}
event.prof <- event_profiles[[1]] %>% gutbehaviour::processed_eventprofiles()
```

```{r}
cumulative_prof <- generate_cumulative_profiles(P.DATA, event.prof)
```

```{r}
freezing_cumu <- generate_cumutime_per_event(cumulative_prof[[2]], "freeze", P.DATA, cumulative_prof[[1]]) # change the event being considered to one of "freeze", "flight", "shelter", "eventless"
```

```{r}
subjects_considered <- c("subject1","subject2","subject3") # add the names of the subjects for which the plot is intended; if all subjects are being considered, pass in P.DATA$subject_names
freezing_plot <- accumulated_time_plot(freezing_cumu, subject_vec = subjects_considered)
```

